var weatherWidget={};weatherWidget.apiKey="9a86ce1cc12a8f26",weatherWidget.apiUrl="http://api.wunderground.com/api/"+weatherWidget.apiKey+"/conditions/q/Canada/";var genreArray=["rock","indie pop","jazz","hip hop"],echonest={};echonest.apiKey="LQ7QBJVEMWLNXSXJA",echonest.apiUrlGenre="http://developer.echonest.com/api/v4/genre/artists?",echonest.apiUrlArtist="http://developer.echonest.com/api/v4/artist/profile?",echonest.apiUrlArtistSongs="http://developer.echonest.com/api/v4/artist/songs?";var randomize=function(e){return Math.floor(Math.random()*e.length)};weatherWidget.StateCity=function(){$("#cityButton").on("click",function(e){e.preventDefault();var t=$("#State").find(":selected").text();console.log(t),$(".weatherConditions").css("width","40%"),$(".music_data").css("display","block"),$(".music_data").css("width","60%"),$(".songs_container").empty(),$(".subTitle").css("display","none"),$(".description").css("display","none"),$(".genreBox").css("background-image","none");var o=document.getElementById("city").value;console.log(o),weatherWidget.getInfo(o)})},weatherWidget.getInfo=function(e){$.ajax({url:weatherWidget.apiUrl+e+".json",method:"GET",dataType:"json"}).then(function(e){console.log(e),console.log(e),weatherWidget.useInfo(e),weatherWidget.displayInfo(e),weatherWidget.changeBackground(e)})},weatherWidget.displayInfo=function(e){console.log(e.current_observation.weather);var t=e.current_observation.weather,o=e.current_observation.temp_c,a=e.current_observation.observation_location.city,r=e.current_observation.observation_time_rfc822;$(".weather_string").text(t),$(".temp_c_string").text(o),$(".city_name").text(a),$(".date_time").text(r),$(".weather_sentence").text("Its "+t+" and "+o+" degrees outside right now! You should listen to some...")},weatherWidget.changeBackground=function(e){/rain/.test(e.current_observation.weather);e.current_observation.temp_c<=-5||"Light Snow"===e.current_observation.weather||"Snow"===e.current_observation.weather||"Heavy Snow"===e.current_observation.weather?$("body").css("background-image","url(images/snow_field.jpg)"):"Overcast"===e.current_observation.weather||"Mostly Cloudy"===e.current_observation.weather||"Partly Cloudy"===e.current_observation.weather?$("body").css("background-image","url(images/overcast_bay.jpg)"):"Clear"===e.current_observation.weather?$("body").css("background-image","url(images/clear_palmTrees.jpg)"):"Light Rain"===e.current_observation.weather||"Heavy Rain"===e.current_observation.weather?$("body").css("background-image","url(images/rain_boatInSwell.jpg)"):$("body").css("background-image","url(images/default.jpg)")},weatherWidget.useInfo=function(e){if("Overcast"===e.current_observation.weather&&e.current_observation.temp_c<=-15)var t=["dark wave","death metal","hardcore","hardcore hip hop"];else if(e.current_observation.temp_c<=-15)var t=["deep nordic folk","trance","indie rock"];else if(e.current_observation.temp_c<=0)var t=["shoegaze","smooth jazz","chillstep","folk"];else if("Overcast"===e.current_observation.weather&&e.current_observation.temp_c<=5)var t=["contemporary folk","emo","jazz fusion","folk"];else if(e.current_observation.temp_c<=10)var t=["alternative americana","folk rock","psychedelic rock"];else if("Clear"===e.current_observation.weather&&e.current_observation.temp_c<=20)var t=["old school hip hop","funk","southern rock","reggae","ska"];else var t=["rock","indie pop","jazz","hip hop"];console.log(t);var o=randomize(t),a=t[o];console.log(a),$(".genre_name").html(a),echonest.genreAjaxCall(a),echonest.imageDisplay(a)},echonest.imageDisplay=function(e){genreImage=e,"death metal"!==e&&"hardcore"!==e||$(".genreBox").css("background-image","url(images/metal.jpg"),"jazz"!==e&&"smooth jazz"!==e&&"jazz fusion"!==e||$(".genreBox").css("background-image","url(images/jazz.jpg"),$(".genreBox").css("background-image","url(images/indie.jpg"),"folk"!==e&&"contemporary folk"!==e&&"folk rock"!==e||$(".genreBox").css("background-image","url(images/folk.jpg"),"hip hop"!==e&&"old school hip hop"!==e&&"hardcore hip hop"!==e||$(".genreBox").css("background-image","url(images/hiphop.jpg"),"psychedelic rock"===e?$(".genreBox").css("background-image","url(images/psych_rock.jpg"):$(".genreBox").css("background-image","url(images/imageBoxDefault.jpg")},echonest.genreAjaxCall=function(e){$.ajax({url:echonest.apiUrlGenre,method:"GET",dataType:"json",data:{api_key:echonest.apiKey,name:e}}).then(function(e){var t=e.response.artists;console.log(randomize(t));var o=randomize(t),a=t[o].name;echonest.artistSongsAjaxCall(a),$(".artist_name").html(a)})},echonest.artistSongsAjaxCall=function(e){console.log(e+" songs will be called this function"),$.ajax({url:echonest.apiUrlArtistSongs,method:"GET",dataType:"json",data:{api_key:echonest.apiKey,name:e,results:8}}).then(function(e){console.log(e);var t=e.response.songs;echonest.displayArtistSongs(t)})},echonest.displayArtistSongs=function(e){$.each(e,function(e,t){console.log(t.title);var o=t.title;$(".songs_container").append("<li>"+o+"</li>")})},echonest.displayArtistImage=function(e){console.log("this function is going to show "+e);var t=$("<img>").addClass("artistImage").attr("src",e);$(".image_container").append(t)},weatherWidget.init=function(){weatherWidget.StateCity()},$(document).ready(function(){weatherWidget.init()});